<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="author" content="Mr Dubem">
  <meta name="description" content="HTML practice">
  <meta name="keywords" content="HTML,CSS,JS">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>GTAN</title>
  <style>
    *{
  margin: 0;
  padding: 0;
   box-sizing:border-box;
    }
  .brief{
    color:black;
    display:flex;
    justify-content:left;
    padding:30px;
    font-weight:bold;
    font-style:italic;
  }
  .sort{
    color:rgba(0,0,200,1);
    padding:5px;
    font-size:85px
  }
  .dent{
    display:flex;
    justify-content:center;
    padding:20px
  }
  .fit{
    padding:20px;
    line-spacing:1.6px;
    font-size:25px
  }
  
 fieldset{
   border:1px solid black;
   border-radius:10px;
   height:70px;
   
 }
  .do{
    display:grid;
    justify-content:center;
    text-decoration:none;
    border:2px solid black;
    border-radius:20px;
    width:200px;
    background-color:blue;
    color:white;
    padding:2px;
    margin:10px;
  }
  .audit,.audits{
    display:flex;
    justify-content:center;
    padding:50px;
    margin:10px;
    height:50px;
  }
 .to{ display:grid;
    justify-content:center;
    text-decoration:none;
    border:2px solid black;
    border-radius:20px;
    width:200px;
    background-color:blue;
    color:white;
    padding:8px;
   margin:10px;
 font-weight:bold;}
.auditss{
  display:flex;
    justify-content:center;
    padding:50px;
    margin:10px;
    width:420px;
}
main {
  padding-top: 70px; /* adjust to header height */
}
  .bend {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: white;
  border: 1px solid black;
  border-radius:0px;

  position: fixed;   /* stays on top */
  top: 0;
  left: 0;
  width: 100%;
  z-index: 1000;
}
  .search{
    border:none;
    background-color:white;
    text-decoration:none;
    display:flex;
    justify-content:right;
    padding:10px;
    margin:10px;
    width:10px;
  }
  .searches{
    border:none;
    color:black;
    font-weight:bold;
    text-decoration:none;
  }
  .images,.imagecap{
    display:flex;
    justify-content:center;
    font-weight:bold;
    text-transform:uppercase;
    padding:20px;
    
  }
  
  
  .image{
    with:1000px;
    background-color:rgba(220,220,220,1);
    
  }
.meet{
  padding:20px;
  display:flex;
  justify-content:center
  
}

.dif,.cut{
  padding:10px;
  line-spacing:1.6px
}
  .suf{
    border:none;
    color:blue;
    font-weight:bold;
    text-decoration:none;
    padding:30px;
  }
  .AI{
    position: fixed;   /* stays on top */
 background-color:white;
  border:none;
  left: 80%;
   bottom:2%;
  width: 100%;
  z-index: 1000;
  }
  .bond{
    padding:10px
  }

/* ---- Added hamburger menu styles ---- */
.hamburger-container {
  position: fixed;
  /* placed below the logo (logo ~120px high) */
  top: 140px;
  right: 20px;
  z-index: 2000;
  font-family: inherit;
}

.hamburger {
  font-size: 28px;
  background: none;
  border: 1px solid black;
  border-radius: 6px;
  padding: 6px 10px;
  cursor: pointer;
  background-color: white;
}

.menu-dropdown {
  display: none;
  background: white;
  border: 1px solid black;
  border-radius: 10px;
  width: 220px;
  padding: 10px;
  margin-top: 8px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.12);
}

/* Menu links */
.menu-dropdown a.menu-link {
  display: block;
  padding: 8px;
  text-decoration: none;
  color: black;
  font-weight: bold;
  border-radius: 6px;
  margin-bottom: 6px;
}
.menu-dropdown a.menu-link:hover {
  background-color: rgba(0,0,200,0.06);
}

/* Book button (blue) */
.menu-dropdown a.book-btn {
  display: block;
  background-color: blue;
  color: white !important;
  text-align: center;
  border-radius: 8px;
  padding: 10px 6px;
  text-decoration: none;
  font-weight: bold;
  margin-top: 6px;
}

/* Status row */
.status-toggle {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 10px;
  gap: 8px;
}
#statusBtn {
  padding: 6px 10px;
  border-radius: 6px;
  border: none;
  background-color: gray;
  color: white;
  font-weight: bold;
  cursor: pointer;
}

/* small note under toggle */
.status-note {
  font-size: 12px;
  color: #444;
  margin-top: 6px;
}
  </style>
  </head>
<body data-user-id="">
  <header>
    <div class="bend">
    <figure >
      <img src="https://i.postimg.cc/ZRSK3pJx/IMG-20260202-144108.png" alt="Gtan logo" width="450px" height="120px">
    </figure>
  </div>
       <div class="search" >
      <a href="search.html" class="search" >üîç</a>
    </div>

    <!-- Hamburger Menu (requested: top-right below logo) -->
    <div class="hamburger-container" aria-expanded="false">
      <button class="hamburger" id="hamburgerBtn" aria-controls="menuDropdown" aria-expanded="false">‚ò∞</button>

      <div class="menu-dropdown" id="menuDropdown" role="menu" aria-hidden="true">
        <a class="menu-link" href="profile.html">Profile</a>
        <a class="menu-link" href="settings.html">Settings</a>
        <a class="menu-link" href="kyc.html">KYC</a>

        <a class="book-btn" href="book.html">Book Job</a>

        <div class="status-toggle">
          <span>Status:</span>
          <button id="statusBtn" data-online="false" onclick="toggleStatus()">Offline</button>
        </div>
        <div class="status-note">Toggle to set technician availability (sends status to backend)</div>
      </div>
    </div>

  </header>
  <main>
    <p class="brief">Motto: Let Their Be Light üí•üí•</p>
    <div class="sort">
      <p class="dent">WireConnect Network</p>
    </div>
    <div class="fit">
      <p>WireConnect is a professional platform connecting skilled electrical technicians, verified service bookings, and trusted client projects. Built from Africa for the world, every connection supports real workmanship while enabling reliable service delivery.</p>
      <div class="audit">
        <p><a class="do"  href="#">Book A Job</a></p>
        <p><a class="do" href="#">View All Jobs</a></p>
      </div>
        <div class="audits">
        <p><a class="do" href="#">Do Kyc</a></p>
        <p><a class="do"  href="#">Customer Services</a></p>
        </div>
       </div>
        <div class="auditss">
        <p><a class="to" href="#"> Client Leaderboard</a></p>
        <p><a class="to"  href="#">Technician Leaderboard</a></p>
        </div>
       <article class="image">
    <figure class="images">
      <img src="https://i.postimg.cc/904qWnn7/icon-service-1.png" alt="decentralized">
    </figure>
         <p class="imagecap">Distributed Network</p>
         <p>Centralised platforms have a single point of failure: if the system breaks, the entire network is stalled until the issue is resolved.
Wire Connect avoids this risk by operating through a distributed service network, designed for reliability, transparency, and uninterrupted operations.</p>
         <figure class="images">
           <img src="https://i.postimg.cc/Y2Gs5tzZ/icon-service-2.png" alt="Your secure way ti crypto">
         </figure>
         <p class="imagecap">Your Secure Way to Services</p>
         <p>The WireConnect platform is designed for everyday use. Secure, simple, and reliable, it allows clients to find, book, and manage technicians with ease. It also integrates a unique feature ‚Äî the ability to access verified professionals directly through your service requests.</p>
         <figure class="images">
           <img src="https://i.postimg.cc/X7vms9Dk/icon-service-3.png" alt="Giant Launcpad">
         </figure>
         <p class="imagecap">Wire Connect Hub</p>
         <p class="bond">Empowering the Next Generation of Technicians.</p>
         <p> The WireConnect Hub connects skilled professionals with active clients. It offers a fair and transparent platform for technicians to get jobs, while giving clients early access to vetted experts. A service hub built with integrity, for Africa and beyond.</p>
       </article>
      <aside>
        <figure>
          <img src="https://i.postimg.cc/hPzWS9bF/service-image-1.png" alt="service image" class="meet">
        </figure>
        <h2>Meet the WireConnect Network</h2>
        <p class="cut"><strong>The WireConnect Network</strong>
        </a> is more than a platform ‚Äî it‚Äôs a movement. Every part of our system is designed to empower skilled technicians, build trust, and drive community growth across Africa and beyond.</p>
        <p class="dif"><ul>
          <li class="dif"><strong>Service with Purpose:</strong> A portion of every connections supports widows, the elderly, and vulnerable communities, making real impact where it‚Äôs needed most.</li>
          <li class="dif"><strong></strong></li> 
          <li class="dif"><strong>Wire Connect Hub: </strong>A transparent platform helping skilled technicians secure jobs, giving clients early access to vetted professionals.</li>
          <li class="dif"><strong>Powered by Community:</strong> At Wire Connect, people come first. Our community drives growth, trust, and lasting impact across the platform.</li>
          
        </ul></p>
        <a class="suf" href="#">Learn More</a>
      </aside>
      <aside class="AI">
        <a href="#"><img src="https://i.postimg.cc/66GgyB9s/chat-traditional-1.jpg"></a>
      </aside>
      <article>
        
      </article>
  </main>

  <script>
    // Toggle the hamburger menu visibility
    (function(){
      const btn = document.getElementById('hamburgerBtn');
      const menu = document.getElementById('menuDropdown');
      btn.addEventListener('click', ()=>{
        const shown = menu.style.display === 'block';
        menu.style.display = shown ? 'none' : 'block';
        btn.setAttribute('aria-expanded', !shown);
        menu.setAttribute('aria-hidden', shown);
      });

      // close menu when clicking outside
      document.addEventListener('click', (e)=>{
        const container = document.querySelector('.hamburger-container');
        if(!container.contains(e.target)){
          menu.style.display = 'none';
          btn.setAttribute('aria-expanded', false);
          menu.setAttribute('aria-hidden', true);
        }
      });
    })();

    // Online/Offline toggle connects to backend
    async function toggleStatus(){
      const btn = document.getElementById('statusBtn');
      const currentlyOnline = btn.getAttribute('data-online') === 'true';
      const goingOnline = !currentlyOnline;

      // Look up user id:
      // 1) body data-user-id attribute
      // 2) localStorage.userId
      // Note: set the current user id into <body data-user-id="..."> or localStorage.userId
      const userId = document.body.getAttribute('data-user-id') || localStorage.getItem('userId');
      if(!userId){
        alert('No user id found. Set the current technician id in body[data-user-id] or localStorage.userId to let the toggle send status to backend.');
        return;
      }

      // Try to get location if available (not required)
      let lat = null, lng = null;
      if(navigator.geolocation){
        try{
          const pos = await new Promise((resolve, reject) => {
            navigator.geolocation.getCurrentPosition(resolve, reject, { maximumAge: 10000, timeout: 5000 });
          });
          lat = pos.coords.latitude;
          lng = pos.coords.longitude;
        }catch(e){
          // ignore geolocation errors, fallback to null
          console.warn('Geolocation not available or denied', e);
        }
      }

      // disable button while request in flight
      btn.disabled = true;
      const previousText = btn.innerText;

      try{
        const resp = await fetch('/api/tech/status', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            techId: userId,
            online: goingOnline,
            lat: lat,
            lng: lng
          })
        });

        const data = await resp.json();

        if(resp.ok && data && data.success){
          // update UI
          btn.setAttribute('data-online', String(goingOnline));
          if(goingOnline){
            btn.innerText = 'Online';
            btn.style.backgroundColor = 'green';
          } else {
            btn.innerText = 'Offline';
            btn.style.backgroundColor = 'gray';
          }
        } else {
          const msg = (data && data.message) ? data.message : 'Failed to update status';
          alert(msg);
          // restore previous UI if failed
          btn.innerText = previousText;
        }
      }catch(err){
        console.error('Network error when updating status', err);
        alert('Network error while sending status to backend.');
        btn.innerText = previousText;
      } finally {
        btn.disabled = false;
      }
    }

    // On load, try to reflect current online state from backend if userId exists
    (async function initStatusFromBackend(){
      const userId = document.body.getAttribute('data-user-id') || localStorage.getItem('userId');
      if(!userId) return;
      try{
        // Attempt to fetch minimal user info to read online (route available: /api/user/:id returns id, fullname, username, avatar_url, lat, lng)
        const r = await fetch('/api/user/' + encodeURIComponent(userId));
        if(!r.ok) return;
        const u = await r.json();
        if(u && u.success){
          const btn = document.getElementById('statusBtn');
          // Note: the /api/user endpoint in backend returns id, fullname, username, avatar_url, lat, lng ‚Äî online isn't returned there.
          // We can request KYC/status endpoint to get kyc_status, kyc_documents etc (/api/kyc/status/:userId) ‚Äî but online is stored in users.online.
          // Because no dedicated 'get user safe object' endpoint exists here, we'll try a best-effort call to /api/login or dashboard is not appropriate.
          // So we skip pre-populating online state unless you add a client-side source (set body[data-user-id] and body[data-online="true"]).
        }
      }catch(e){ /* ignore */ }
    })();
  </script>
</body>
</html>